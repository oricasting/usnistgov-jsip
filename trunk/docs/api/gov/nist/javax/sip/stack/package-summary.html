<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN""http://www.w3.org/TR/REC-html40/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Jun 30 11:47:27 EDT 2003 -->
<TITLE>
gov.nist.javax.sip.stack (JAIN-SIP 1.1 RI For the People!)
</TITLE>
<META NAME="keywords" CONTENT="gov.nist.javax.sip.stack package">
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">
</HEAD>
<SCRIPT>
function asd()
{
parent.document.title="gov.nist.javax.sip.stack (JAIN-SIP 1.1 RI For the People!)";
}
</SCRIPT>
<BODY BGCOLOR="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b> NIST SIP Parser and Stack (v1.2) API </b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../gov/nist/javax/sip/parser/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../javax/sdp/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<H2>
Package gov.nist.javax.sip.stack
</H2>
This package contains the classes for building a SIP stack.  
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="ChannelNotifier.html"><I>ChannelNotifier</I></A></B></TD>
<TD>An object that provides notification back to the application on new channel
 creates and deletes. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="MessageLogTable.html"><I>MessageLogTable</I></A></B></TD>
<TD>A table for remote access of log records.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPServerRequestInterface.html"><I>SIPServerRequestInterface</I></A></B></TD>
<TD>An interface for a genereic message processor for SIP Request messages.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPServerResponseInterface.html"><I>SIPServerResponseInterface</I></A></B></TD>
<TD>An interface for a genereic message processor for SIP Response messages.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPStackMessageFactory.html"><I>SIPStackMessageFactory</I></A></B></TD>
<TD>An interface for generating new requests and responses. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTimerListener.html"><I>SIPTimerListener</I></A></B></TD>
<TD>Event listener for timeout events. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTransactionEventListener.html"><I>SIPTransactionEventListener</I></A></B></TD>
<TD>Interface implemented by classes that want to be notified of asynchronous
 transacion events.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Class Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="DefaultRouter.html">DefaultRouter</A></B></TD>
<TD>This is the default router. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="DialogImpl.html">DialogImpl</A></B></TD>
<TD>Tracks dialogs. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="HopImpl.html">HopImpl</A></B></TD>
<TD>Routing algorithms return a list of hops to which the request is
 routed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="IOHandler.html">IOHandler</A></B></TD>
<TD>Class that is used for forwarding SIP requests.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="MessageChannel.html">MessageChannel</A></B></TD>
<TD>Message channel abstraction for the SIP stack.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="MessageProcessor.html">MessageProcessor</A></B></TD>
<TD>This is the Stack abstraction for the active object that waits
 for messages to appear on the wire and processes these messages
 by calling the MessageFactory interface to create a ServerRequest
 or ServerResponse object. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="ServerLog.html">ServerLog</A></B></TD>
<TD>Log file wrapper class.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPClientTransaction.html">SIPClientTransaction</A></B></TD>
<TD>Represents a client transaction.
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPServerTransaction.html">SIPServerTransaction</A></B></TD>
<TD>Represents a server transaction. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPStack.html">SIPStack</A></B></TD>
<TD>This class defines a SIP Stack. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTimerEvent.html">SIPTimerEvent</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTransaction.html">SIPTransaction</A></B></TD>
<TD>Abstract class to support both client and server transactions.  
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTransactionErrorEvent.html">SIPTransactionErrorEvent</A></B></TD>
<TD>An event that indicates that a transaction has encountered an error.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPTransactionStack.html">SIPTransactionStack</A></B></TD>
<TD>Adds a transaction layer to the <A HREF="../../../../../gov/nist/javax/sip/stack/SIPStack.html"><CODE>SIPStack</CODE></A> class.  </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="TCPMessageChannel.html">TCPMessageChannel</A></B></TD>
<TD>This is stack for TCP connections. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="TCPMessageProcessor.html">TCPMessageProcessor</A></B></TD>
<TD>Sit in a loop waiting for incoming tcp connections and start a
 new thread to handle each new connection. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="UDPMessageChannel.html">UDPMessageChannel</A></B></TD>
<TD>This is the UDP Message handler that gets created when a UDP message
 needs to be processed. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="UDPMessageProcessor.html">UDPMessageProcessor</A></B></TD>
<TD>Sit in a loop and handle incoming udp datagram messages. </TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Exception Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="SIPServerException.html">SIPServerException</A></B></TD>
<TD>Exception that gets generated when the Stack encounters an error.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package gov.nist.javax.sip.stack Description
</H2>

<P>
This package contains the classes for building a SIP stack.  An incoming
message is passed through the parser and generates a SIPServerRequestImp
or SIPServerResponseImpl. These are interfaces that are implemented by the
application. There are two main classes here.  SIPStack:  is quite simple
and stripped down in its goals (for example, it does not provide any
transaction support). It is essentially a messaging layer that utilizes
the nist-sip parser and defines abstractions for message processing and
I/O handling.  The transaction layer is provided by SIPTransactionStack.

<h2> Operation of SIPStack </h2>

An application extends the SIPStack class in this package and is expected
to implement the SIPMessageFactory, SIPServerRequest and SIPServerResponse
interfaces. The message factory implementation is registered with the
SIPStack class on initialization. When a message comes in, the stack
calls the NIST-SIP message parser to process the request and then calls
the Message Factory Implementation to create a new SIPServerRequest or
SIPServerResponse (depending on whether the message was a request or
response) and then calls processRequest on the created SIPServerRequest
or SIPServerResponse.

Here is pseudo-code that illustrates the flow of processing messages
(for UDP):

<pre>

while (true) {
   String messageString = messageChannel.read_incoming_message();
   SIPMessage parsed_message = 
		sipMessageParser.parseSIPMesage(messageString);
   sipMessageFactoryImpl.newSIPServerRequest(parsed_message);
}

</pre>

The actual code implements the SIPMessageListener interface which has
a callback method for erroneous messages.  TCP Processing is a bit more
complex because of the stream oriented nature of TCP. 

There is an architected means for dealing with extension headers by an
application implementing the ExtensionParser interface that is part of
this package.  Such extension parsers are registered with the stack by
using the SIPStack.registerExtensionParser method which specifies the
extension header name and the parser for the extnsion header. If the
header parses correctly,  the application returns a class that subclasses
SIPHeader and that specific to the extension header and if it does not
parse correctly, the extension parser may throw a SIPParse exception.
Extensions headers that are not recognized by the parser are stored
in a list and can be retrieved by the application by calling the
getExtensionHeaders method that returns a list of extension headers.

Requests routing is handled by the SIPServerRequest handler. A routing
algorithm may be specified by implementing the Route interface. A default
routing algorithm that just forwards to a hard-coded proxy address is
implemented in the DefaultRouter class.

The stack supports logging of messages into a log file that can be specified
on start-up. The log file is accessable remotely via RMI. The format of the
log file is specified in XML. This facility is to be exploited for log
file visualization. See tools.traceviewerapp for a visualization tool for log
records.

<h2> Operation of SIPTransactionStack </h2>

SIPTransactionStack, is the stack you need to extend to build
transaction-aware components.  This implements a transaction layer for the
SIP stack according to chapter 17 of RFC 3261.  To implement transaction
stateful components, you extend the SIPTransactionStack class and not
the SIPStack class.

To create a client transaction you create a transaction aware
MessageChannel for the Hop returned from the router by calling 
Stack.createMessageChannel.

A server transaction is created when an incoming request is fielded by
the stack. It is passed to the application using the SIPServerRequest
and SIPServerResponse interface which are defined in the 
gov.nist.javax.sip.stack package.

The JAIN SIP statefull transaction layer is derived from the 
SIPTransactionStack herein.

<b> The transaction layer was contributed by Jeff Keyser. </b>
<P>

<P>
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b> NIST SIP Parser and Stack (v1.2) API </b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../gov/nist/javax/sip/parser/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../javax/sdp/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" TARGET="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;
<SCRIPT>
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
<A HREF="../../../../../allclasses-noframe.html" TARGET=""><B>All Classes</B></A>
</NOSCRIPT>
</FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<font size="-1"> <a href="http://www-x.antd.nist.gov/"> A product of the NIST/ITL Advanced Networking Technologies Division. </a><br> <a href="../../../../../uncopyright.html"> See conditions of use. </a> <br> <a href="http://www-x.antd.nist.gov/proj/iptel/nist-sip-requestform/nist-sip-1.2-requestform.htm"> Get the latest distribution. </a><br> <a href="mailto:nist-sip-dev@antd.nist.gov">Submit a bug report or feature request. </a><br> </font>
</BODY>
</HTML>
